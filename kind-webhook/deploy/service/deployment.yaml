apiVersion: v1
kind: Secret
type: kubernetes.io/tls
metadata:
  name: testing-wh
  namespace: default
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVZekNDQTB1Z0F3SUJBZ0lRZXMzaEtiMFdyaEcvbmJaeE9tUkp3VEFOQmdrcWhraUc5dzBCQVFzRkFEQVYKTVJNd0VRWURWUVFERXdwcmRXSmxjbTVsZEdWek1CNFhEVEl4TURVeE1ERTNNakV4T1ZvWERUSXlNRFV4TURFMwpNakV4T1Zvd0xqRVhNQlVHQTFVRUNoTU9jM2x6ZEdWdE9tMWhjM1JsY25NeEV6QVJCZ05WQkFNVENuUmxjM1JwCmJtY3RkMmd3Z2dJaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQ0R3QXdnZ0lLQW9JQ0FRQ3ZaSk8xeUxyVXg4NHUKTUhBSWhFU0RnbzlxaFdxVDJybzdlV1lqQlE4Qm1LZ09LcjRtMlhMNTgwOG1VenNyZ3o1TU93R21lOHU0aC81QwoxdVdNWU4yWGt6Nk95bHU2T2gzSjhDeGg1SU1MVEZNcDdXZzEvNVd0aWEzTi9TaFpLUGVKVTdBdHdyK1Nvd3JDCm5TMVNqaUFGbVJsa2lGWEdneWlJK0FQZytMa29ORWFsNE01aEhubDY2THFqb3BiZS9jZGgzdEF2SmE5WXdXYmMKbVk0S2EwUXBJbzVGWUo5dlJWK3U4cisycUxtMnlwdzVOazNFM1N3djZUZUIvYitITy9ZNklvbGpMMWVvMXhtVgpENEYzUC9CYWYrSG5IOTNmNUdPZHhWYU5ORFNzWFcyMEcyZ0lSdlI2bDZhaitPbUxlOC8xOU1vbEtIcXZPSmhhCis0cmZyOXhxcGdqUHpucEl0cnprN2RVVHNNQnNlblBmL3RFVkRqVzVyTnBzc2kvT1Z0Rm0xZVVITXVwQ3R0Q28KZ3ZBcGczOGdkcHRFOG9GZGVLcm82aG5KbThHRHpZd0czYnRySU85NnNoWkdJb2hEemlLWUdheFN4WUFIeVplRgpzVnZPajhQczgrcnFTdXdmMTh5VmZ6TEMxWTYzZnFnNzNRVlFaQUtVSVFOQUdmVGQrS0RsRGRBanBnZ0VTWUFTCllPZGlMdk9nVHgzdmd6NnYwV3F2WTkrVEVvMXJ1cTFjR0dCZkdmYmpaYVBDUXFNYWRlNEhOQUZ0NmRBREpmR3oKNEwrS1ZlZFp3dFhFRjZiQVBSUS8xbzdBdjlWbjkxeWE1WWtNeEQyNWtCakFBMjhjcVdlSFVLbTJPMmVrS3U2Uwo5Y0lNKzdVcDllWlltR1BiQjlPQU52Mit2WHZCd3dJREFRQUJvNEdWTUlHU01BNEdBMVVkRHdFQi93UUVBd0lGCm9EQWRCZ05WSFNVRUZqQVVCZ2dyQmdFRkJRY0RBUVlJS3dZQkJRVUhBd0l3REFZRFZSMFRBUUgvQkFJd0FEQWYKQmdOVkhTTUVHREFXZ0JSTkJ4aUtXVVF6bWlwdWVHempZdktteGRJRjJ6QXlCZ05WSFJFRUt6QXBnZ2xzYjJOaApiR2h2YzNTQ0ZuUmxjM1JwYm1jdGQyZ3VaR1ZtWVhWc2RDNXpkbU9IQk1Db0NRRXdEUVlKS29aSWh2Y05BUUVMCkJRQURnZ0VCQUtQcmlHcHRhL3pTTloxN01hR2NTSFNzNDFRL2lKZUJYR0l1VjFHckRLMXpLQmNtQ2VRWmdBTjIKM3E4cmxGZDFhM0ZjbnNGcW0zRkh4YSswV0JSOWQ4S1NUbjVtS3RSNWRSbllWR0cxWWdRalpETmhkaXE3bUIwVgpNTVF4MGxDeFlFZHpVeUpHOEg1dE0vNTZRbEFvdWYvRTcwL3JTYjJZOFQ1N0YzNlp3cGt5SlZrYXY4b2lCaUl0CjcrbGdOUWtya3NHdXhOU01CYVl6U3RGOTZTczhJYmZJckZDODlacnFMNnNVdHdMTzUweno5WlJBd3F6QVZzd3oKZVpYOWY1dmNoZDNnMmhheDVRN0lWZmtrcTlrejNIb1czYjBWZWRmd0l6R0ROU2lKSmtFaVZlV3BLN3ZBMER6QgpFcXRDWG5CZnA5RG5VM1JHRGF1WTVaS0ZQWGorYml3PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS1FJQkFBS0NBZ0VBcjJTVHRjaTYxTWZPTGpCd0NJUkVnNEtQYW9WcWs5cTZPM2xtSXdVUEFaaW9EaXErCkp0bHkrZk5QSmxNN0s0TStURHNCcG52THVJZitRdGJsakdEZGw1TStqc3BidWpvZHlmQXNZZVNEQzB4VEtlMW8KTmYrVnJZbXR6ZjBvV1NqM2lWT3dMY0sva3FNS3dwMHRVbzRnQlprWlpJaFZ4b01vaVBnRDRQaTVLRFJHcGVETwpZUjU1ZXVpNm82S1czdjNIWWQ3UUx5V3ZXTUZtM0ptT0NtdEVLU0tPUldDZmIwVmZydksvdHFpNXRzcWNPVFpOCnhOMHNMK2szZ2YyL2h6djJPaUtKWXk5WHFOY1psUStCZHovd1duL2g1eC9kMytSam5jVldqVFEwckYxdHRCdG8KQ0ViMGVwZW1vL2pwaTN2UDlmVEtKU2g2cnppWVd2dUszNi9jYXFZSXo4NTZTTGE4NU8zVkU3REFiSHB6My83UgpGUTQxdWF6YWJMSXZ6bGJSWnRYbEJ6THFRcmJRcUlMd0tZTi9JSGFiUlBLQlhYaXE2T29aeVp2Qmc4Mk1CdDI3CmF5RHZlcklXUmlLSVE4NGltQm1zVXNXQUI4bVhoYkZiem8vRDdQUHE2a3JzSDlmTWxYOHl3dFdPdDM2b085MEYKVUdRQ2xDRURRQm4wM2ZpZzVRM1FJNllJQkVtQUVtRG5ZaTd6b0U4ZDc0TStyOUZxcjJQZmt4S05hN3F0WEJoZwpYeG4yNDJXandrS2pHblh1QnpRQmJlblFBeVh4cytDL2lsWG5XY0xWeEJlbXdEMFVQOWFPd0wvVlovZGNtdVdKCkRNUTl1WkFZd0FOdkhLbG5oMUNwdGp0bnBDcnVrdlhDRFB1MUtmWG1XSmhqMndmVGdEYjl2cjE3d2NNQ0F3RUEKQVFLQ0FnQklTUWxmaUVVSDRQa21yQ3ZnTnJNT0NFY1hQYms1Q3BKcVpKUWxwcllTa0ZuaXpOYmxxQVRzNHN3aQpIWGRyYllIRlpTUSsreEp4RVF0SGZNM0tWem04ZUtEMXRJeXRhYnBST2J6dzgzN1dyelF2T1hzVGxpeVlBd0F3CnZ6OWJ6N2lGVG9wenNhbkd3NDl4dWRtdUJvbElCVnNqeGRTa0pmWVV6VEs4QzRZei9hZUlRZWlNdWtTUzFVdm0KbU9IWk1YcDA2YUdmYk1haHE4TzY4MFpKSVFCTWU4TnE4SEdGS0hCUTZCYi9MdmFyVVVHbGlxM3Vqc0RoVmhyYwpaam9EZ0VEd29MOUNzNFpMUGF0N2RaS0VGVVAzNkhDd0VzQWN3RUlXQ2ZpcjVYSTMvNkZ3ODBLaTlxdFh3eHlZCnc4TnRDekFnVEN6cnQ0MG9uZ2ljcHNNTGdhMHpVRGhHVjR0eEFvbnFoMkZ2NGY2NVNvU2U5V2kxNzVkc1l6NjgKS3lwMzRmTVF4emU3bzlJd2VnVmJRaWpueUtKelBMcmZMUFdhOFFzN3JGYXFMc3o2REx4SVNKSFhaNk1uL1VBRAo0VkFwM3Vva2ZnL1gyb2hVbmhodk9SMWNSbU1kTDBBVjVKbUdlRHVKdXk0d0V0eFZWaUp1UVNucURUNUg1RG5rCjl6K2piZE81aHQzNHBLMFhIdEZnY3d5d2RXNUxWTE9PYmo1bWRhU0ZKaGpackE3YWRZalUvbVA1dzFic3dDRjEKZVJWU2d5aGJwMVRkMXViWis4OHlrK1psb0FVNDF0SzlPL0JSRXN0TUlVVGFTRm55RzhCTUxpVGVkRTVHYityaQpWY25neFpTb2VMZ1lJaEhoZlcyVGw1SUpvVmFnR0RnWlNhY3JIcWVoMXJXWjQzdzh3UUtDQVFFQTNaU1hPejRFCnkvRVlkalp5YkFEdEl3RzMzdmFtMkJxbGZrMzZ6QlY5akJrQVN6SnNKSFF2NHpIeG5lUXRJaGxlK3ZHa29aRUoKa0J0K09pcWY1R2Y3YnEwbDM2VFc1aTk0MUxycURSdTJvV2g5Y0Z6YlBhQ3JZNUlaaFloMVpoK0xYS2Z2d1h2aQpoUjdSbkVpQkNwT2hWU3R1bm9PbWNGRm1QZ2NyOUhQNHkwa25XcjdvQlpaejRWblRnWkFQRW9tVHBrWlBsT2pWClJhVTY4dG14SWo0Y0ltSEhlUjcyUDZTZnhKUUpmTDNOYXpLYUszbUpBWHJZTlpOZlgvQ05PWmlCa1lvTmpzcnkKR1J2TDZnU1pmTWljTUtNYStzVHNaSkdOOHhjMGQ5RWtYY1hBWmhxUVJHTG5GVjFINkJxSWZCdGk0c0h2ejRMVApFLytKc2Q3cWZKRHNzd0tDQVFFQXlxTkloTS9ldGlwbHp2em5vMjFlTzVUZXVndEVhUjlPWTZJeFpJaHJ0SklmCkljOUNTai80Y0I4dmlQQTNSK3NoaW1QdEZ0Nk1TOVN4cExXSUxjR3JLRS94QUpIN2dhUFN4all0SjdkU1NZOFAKa2ZqejZvUjVxWmJTTWtQYmkwVmd5cEEybWd5aWgvSGtwNGJneVEvNVlldnE4N1JxbHhiVVJ2RC9RK0pYWDI2dgpEMVNsRjJuampHaExoK3lxQ3JQSDVadEwwMHZiZEprTmNyRHNtakFmblIza1NFYkZ6T0FFRDFOK05vWTlvRTRqCklJWXRVa296NnZSd1EySE9scmVwcDhGa0ZycXBJTU54ZVNvYm5JN0tuM0d0SDI5Sy9wZWRkZnR3V3k3QUJUZE4KRGV6MEE3TXM1SmdnYVJueGRvNW8wVnovV3FWWnRnc2V2Y1FlaUJoK3NRS0NBUUVBbWQ2RG5tb1UzcUtQd0JkVApJZGtLMDVKdjR1OFpNVnhmcS9QdXd5WHhSd1pkZzlxQjZsYWNvb0tlTEd5MVFzYW5oRStsYVdUVVpUUVNWY1lmCnZuYk96UzZEN0dnRnExY3Y2MW5aQ2oxQ2Q1ZWQ5QmNuVUFad3ZmWklyc2Z4N25iZFNmeDhxN21odFp1UEo1M1oKcmtTU2RoaHcrcmFsTDczMjZBQUc3L3hRdXFvVUlCb04rVU5mT1JBdHBmMHAyaytiTG80STJYbE9FTTBLd0hXWApZaFlMWjN6TERqc0grVzRTWEdvSXBJMFJSdTJlemEzYURDTUlYVHYzc1NIVWtEaHRVV215dklRRjFwWE01cmRHCjlyWkFjQzN6b0V4N2MrTDMxZVU1VkRMeHRBU005TnBoY0h2VnlLbzhNdHVxQjdUazJGNmdiMU9EekpGWlJ5RnIKYUJFanJRS0NBUUJOYmNyK0JMZmkvNXhiVlVQbHJKcS9SWWs5cWFTQVRwZ1RkaHhOZjlzMzZrVy9FNFVPL2hhZQpNU3htdFBOS3BjdnhKM0dtdFc4Q1lzbG1XSDhxak1BcjdTLzN1ZEJTbnhpZzZINmttR1gyK1pWSGY4c2tKMjZkCm9LVzgwelVHcUlIdHBPRllSOCtyQm9FS2luMUdGcmFCOWpXVzNhK0ZBQklvOFZsNHhQb0IyemRGTW1ESzY0a3AKVTRqWTdWT2tOMElBdURCbkVxdE9pRlVkS0FHZ2dSYnpZRUtrWTNhZGJGUGd6MVNBM1JhYk5JQXpvMUdhQ2dTQQptTnAweE9DOXNudy9QNlJSRXc0aEdNMDVNUi9QMkxnUDZNM3dId1NXOTdRUkt2eXB1dGxncE5ycW9VbzBSN2kxCnVITlo5YkhRVFdZNzZiOGhFZUdQci93Vkl1VlB0NXhoQW9JQkFRREpKdDl0Y0JzazJ1ZVd4RnQ2K2M3MG13ZVcKOHlwVGp6MTQwdUIwdjZFRWk0QjZJdFM2NUxQUmtCZW9FVUVsVGZnd1ZHNCs0TnpwYmhaNHBSeDlNUjBrSjlYYQp1bDd3TWpzZnJybTVoNk9hM0pnek4xTzcya0puTUF4TG45STVDYUN0TDYxNWlMOGpUbDlGd3JncFpHR3J4M3FJCkk4NnZzQlNOZzVHSXBvTnNPZlJkMmZyZERTMHFzekFsbUpYeTlJeFlmazkveEw3clFhcFoyMlAySEJoeWNRc08KWW5yZk1seFdtWTgzaXNscktkaEZTK2Y1V1V0NHNOdmd2UWR3UlNqaEJ4ZjVZZXczaTRab1lqQjhJUjhHN3ZwcwpJQkZQNlN6UmFMMTBrOVBSRVViVHZvQkJGZC9zbCt4QlA2TjBCMG5lTEFhM29YeThHcWYwc3BqR2VqYUUKLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: testing-wh
  labels:
    app: testing-wh
spec:
  replicas: 1
  selector:
    matchLabels:
      app: testing-wh
  template:
    metadata:
      labels:
        app: testing-wh
    spec:
      containers:
        - name: testing-wh
          image: soorena776/testing-wh:v8
          imagePullPolicy: Always
          args:
            - -tls-cert-file=/etc/webhook/certs/tls.crt
            - -tls-key-file=/etc/webhook/certs/tls.key
          resources:
            requests:
              cpu: 250m
              memory: 25Mi
            limits:
              cpu: 250m
              memory: 25Mi
          volumeMounts:
            - name: webhook-certs
              mountPath: /etc/webhook/certs
              readOnly: true
          ports:
              - containerPort: 8099
      volumes:
        - name: webhook-certs
          secret:
            secretName: testing-wh
---
apiVersion: v1
kind: Service
metadata:
  name: testing-wh
  labels:
    app: testing-wh
spec:
  ports:
  - port: 443
    targetPort: 8099
  selector:
    app: testing-wh