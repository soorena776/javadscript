apiVersion: v1
kind: Secret
type: kubernetes.io/tls
metadata:
  name: testing-wh
  namespace: default
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVaRENDQTB5Z0F3SUJBZ0lSQUw5VEdjU0dKVWlPOTMyYUUrUmNlUnN3RFFZSktvWklodmNOQVFFTEJRQXcKRlRFVE1CRUdBMVVFQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TVRBMU1UUXdNVFV6TWpCYUZ3MHlNakExTVRRdwpNVFV6TWpCYU1DNHhGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1STXdFUVlEVlFRREV3cDBaWE4wCmFXNW5MWGRvTUlJQ0lqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FnOEFNSUlDQ2dLQ0FnRUF3a2FDQ1dLNEEyMFgKYkJjMys0VVlUMWl1Q2c1UFVhbkZoVStmbHZJN0VaZkNhdFlwbkpreWlURlcvSkxaZFZQQ3RaRkpVdlB3NGJ3RQplZWU4WVN5YTR2ZEwyVzhjU3BhK2E5eHEvQWVSdisxLys3RVBwbzNuK0x4ZWY1SFB1QXFneEZtdzdIRklaMytpCnZDakh4RmpFc2RncE15eVlkdnpuTkZKQkxtQmppdWZ2R2EzQldmbVV5R0ZrWkgra0RVRGFaK0ZseSsvSW9RUSsKZTAwYVRZODV2TnRCSWtiNGY4aG5GK3Bvbkh3MzJYRWIrenRoWUF3cHFhYVVUdGhuU1hqV2d0RlQxcmdLaHF6NQo1TnAweW1oWCtqVFJFQk1WWFhwanhvQ0JDRHIyTDFiczhCaVZOL1pOSXNNV1VRTWhSZTllbUNBMS9OUmVVK2JFCkhyL0dTOGxzbjh1TGRwcmZCeUlxMHI3N3VGNmVLbmdSUDBESmNXT0lzY09QMVNZT1BQZDJ6R2c5Z2xWRkpTTnYKSS9BNXdnbkhZd1U0WG9PMUtFN1pXTnptSnQvc3d0VGdESjE1N0pwbStNcnRraXo5Qk9US1Jncy84M1dzdFhGSApVZWxZbzVBZTZXaTdrdlZIeDBIVWVQczN4QkdUVkd6azdpYktpVUQzei9SbEwzbDFWNi9oZjEwVmM5bDBXdytSClQ0bXJiVDA4YVJSNkpXU0k1QUtRRHVpVVBtdFZBMmZKK2RGVkNMcVdoM0RwTFlYdy9WUDVLUHZ5cTZEVElrZGsKZkVUdU1JV252cy8rajBJRStFRWJaUnZNUzlSVjlweW1vYklYTWhsaXFFMG95eS9JZkpPWEdrSVZuY2VwcXowZgpjSXFHVWZIam5QejhLSzdPYk5ubmlNbDRXa3NKd1RjQ0F3RUFBYU9CbFRDQmtqQU9CZ05WSFE4QkFmOEVCQU1DCkJhQXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DTUF3R0ExVWRFd0VCL3dRQ01BQXcKSHdZRFZSMGpCQmd3Rm9BVVRRY1lpbGxFTTVvcWJuaHM0Mkx5cHNYU0Jkc3dNZ1lEVlIwUkJDc3dLWUlKYkc5agpZV3hvYjNOMGdoWjBaWE4wYVc1bkxYZG9MbVJsWm1GMWJIUXVjM1pqaHdSL0FBQUJNQTBHQ1NxR1NJYjNEUUVCCkN3VUFBNElCQVFCU3VKbTVlQVdMV3NUcTBLcTJPQy9lTFB1Q1dObWQrTmlsNWVqU3VraHZWbjY1MG15aW9YemQKU2FWRGNSdGd1RFl1RFIrNGlmdkYwaUJCUTVyRkpYSFEvS0JIRS82c3pFVnRpdFZrVGx3aEJzemF2T28wbFJZUgplYW9kWG1uZGFTOFlCL2tIQWcxSHMyTUtqQ0IvS21qLzBzMnF0N3ZLWmh5VjUxd0tkbURlaHdwMzRJanpEb0dMCjZnektwdWhXazNsK3JoRDJKcmwrUmFFSHZDZG5wSGZJY2EzbTJoaUpsaCtOU2V0OGRkLy9iVGdXYlY3eXJaYloKSm1IWlQ2aUR5ZnhzMFBtUFVRb0h1SEVEUW4zc0VYYUJjZDdvY1pFUGNqOFZGZVUzQ1BxUk9ZZVlySUM4YWFCcQowWXdRWUZsL2N2djlyRjJLZE5JRjlZa1BTNFZvcy9YUQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS2dJQkFBS0NBZ0VBd2thQ0NXSzRBMjBYYkJjMys0VVlUMWl1Q2c1UFVhbkZoVStmbHZJN0VaZkNhdFlwCm5Ka3lpVEZXL0pMWmRWUEN0WkZKVXZQdzRid0VlZWU4WVN5YTR2ZEwyVzhjU3BhK2E5eHEvQWVSdisxLys3RVAKcG8zbitMeGVmNUhQdUFxZ3hGbXc3SEZJWjMraXZDakh4RmpFc2RncE15eVlkdnpuTkZKQkxtQmppdWZ2R2EzQgpXZm1VeUdGa1pIK2tEVURhWitGbHkrL0lvUVErZTAwYVRZODV2TnRCSWtiNGY4aG5GK3Bvbkh3MzJYRWIrenRoCllBd3BxYWFVVHRoblNYaldndEZUMXJnS2hxejU1TnAweW1oWCtqVFJFQk1WWFhwanhvQ0JDRHIyTDFiczhCaVYKTi9aTklzTVdVUU1oUmU5ZW1DQTEvTlJlVStiRUhyL0dTOGxzbjh1TGRwcmZCeUlxMHI3N3VGNmVLbmdSUDBESgpjV09Jc2NPUDFTWU9QUGQyekdnOWdsVkZKU052SS9BNXdnbkhZd1U0WG9PMUtFN1pXTnptSnQvc3d0VGdESjE1CjdKcG0rTXJ0a2l6OUJPVEtSZ3MvODNXc3RYRkhVZWxZbzVBZTZXaTdrdlZIeDBIVWVQczN4QkdUVkd6azdpYksKaVVEM3ovUmxMM2wxVjYvaGYxMFZjOWwwV3crUlQ0bXJiVDA4YVJSNkpXU0k1QUtRRHVpVVBtdFZBMmZKK2RGVgpDTHFXaDNEcExZWHcvVlA1S1B2eXE2RFRJa2RrZkVUdU1JV252cy8rajBJRStFRWJaUnZNUzlSVjlweW1vYklYCk1obGlxRTBveXkvSWZKT1hHa0lWbmNlcHF6MGZjSXFHVWZIam5QejhLSzdPYk5ubmlNbDRXa3NKd1RjQ0F3RUEKQVFLQ0FnQUtINUJ4R3NMSjh1cFFpSmt6TXdsRVFUTzRkR3h2cmZBTDlVMDBtV1M0a3ZiZmlFOWN5S0xZZ1VpdQpHcHpZUDBnYkcvbjlKNWI2dkVoamJjN2tKV1hndzlBaEFXZ3cvcy9uWVBIMk5oTEROSVlCd0lVM1FaZS8zMWp4ClB0RGJIenFuWUtFV2dRU3IxL3ZMNERnZ3BCdUR4T2JJc3Q4eS9CUzBKa0VkUUlxUFYyeWZJdTI3V1lVR09BVDYKTTZpQnhFcGROV0tQa093Y2I5TXRxNlBlUE1OZWN2SmU3ZUhQRHN0SWRMK0V2L2hORFZiTzdaWXlZZy9kdGo5dQpLRnFoZW5sN0VadFR5ZjFLYlVNTVNOSGpKakxIWis4bzdrV2p2RmZzcFErVU5UWlUyeXUzaXlCamJTTXgxNGFYCkxCbVV3bGRraC9Fb1BveTN4SU9kc3BLTHFuQk5mL2pIOUNSTitHdUdmSFRwTnk3QzhWZ0FEeWFuZ2EzWG8ycjMKck02SG1UTFc5YUIwa3RZSkNwSm05RzNzUFFiU2FpRWdtWFFYL1NhaE1xVVZYMEpKNzcxc01QbWh1ell2TWFYbgphMjFSRjd3THVyRTU3MkMrVVJRdVR5UmNmL2JVN01IM2VNK2duWExWRmxjb2ovS0lYZmhRMlp0WEVRREcvY0srCm5XNW15dDFKY0JIZVFQeDVxOGVIUDV2Tzg0NFN5bkUxdDV2K3E1M1NMWnhpT2ZtQ1ZkdFBBVkpyd3VjVnJjTUEKbGpyY0lpSW9FV1o5aUowUk54clFReVMwdmJidzFuc1NIcGN0aEJwQldiTHQ4SXB6WkQ0QmdjdG5VZzBEdGh3TgphUDIwYkcwbktwbW1rME9iMThWWTJod2JHL3FscTduVkxBR2tPSGsxeWRWMWNEb0phUUtDQVFFQTkyYnpmY2xsCjlVNzc5eGtYSzRyT1dJQnA2NUhiWG13SnpYbk53NzBqTGVhaDAwdVYvWHphb2hoY25JK2h3M2NXWHhLSk1KdFIKSjdQYzY4WkROVkl5UDdLQmRoOUNpVFhTSmVKMjhlNVR0eTd4eVdjVUdnc0xEYTJWb0dCQXVqSGNOZVNoRUo5VQp0M0F5U1ZhNXM5Z0xBTHh0OVZSQ1RLM0VTUFRlZDlzczg1M2tSdkQrS3BjRUJtMSttV0RiZWZhY0Y1L2FNb1RkCkxkeVprVkhoQ1FwMDE0TFlZUE5nUUVyZjhveENrbmVMWm9Qa2RaZDRFcW5XV2ZjTVpYNkJkSjhnNTdtRnVmMWgKL1Rrc1lrUU9QUWFlWVJrYzcxTG5DNGF6RGUrUDc1V1ljWm9SZVZuZjk2eUZacXBkUjBmMXp0cGhxcFdXZmlYMgpBZGpKTjZYb3FMNjAwd0tDQVFFQXlRYm9QcmxFS3BLYlZnK2gzZjV2aCt0SXNMR203OHZTWHYxSXNiQU1pZ2xMCm13K1gvTHN1ZjVUaVFGVksyNCt2ZEZUYkRhSUVDYU95UlEvKzdXdnNRc1FtY3JTa2RPWk9uTjF5MW8wZHk5Z1cKOVBBam1yTW5xbzIyVnJhWVZjbm03RTZrN0NXYXR4eCsrcm1kOWd6U3l1K0t4Tk5uL01XVjc5TTliWGtxa01lRQp5NjVMQ2pDNWwrNGo2YkN6MkFraElnalZoREo3cHlsUTg0UUxmejgyMURpc1RJUmNKQVl4MEFXaVhuMFhUQjE0CmJzYWcvbnlFejlDV0NFc3Zjb0tLZGM2ek11eUVaeUkwMUg5L09VYk56Rm92L2Y2YkordmVPVkcwblA2dmY2WkIKMlluejNoRjBjaVJlTVJzSkpXRFFzaXFJZFBhMWdUZTcwWEtMbUVtVGpRS0NBUUVBNUkrbUwvVmFUcEVUMHFySgpieDZqbDd1N0h6ajNFM3A0YSs0MW5Mb2x3QWdzUk1xMTNTUDEwSDcxUUdhcHFhMWhhNS95UW9lYktEVFF5cm0xCjZaTHdmVXhxc2pnYS9peE00MWNmVUU4LzVDSm9tZ3F5MVlTU1I2YXdieU85YU1jYmpHYVdMb2NrZXZ3YVdRclkKTVVCTW1mZDdGb1VyWXkrK0FURElQcTZzRHIwMTRoeE9sQVpFWDdQVW05cVJxVkdkejIyTTVkTTlpMXNjUE5jSwpNWklKYy9pYjhxV2xySC8vK1ZKL1JsVk80ZnpEbWFlLzlHNFhhN0lETDlqNXZFWXUzaVhWVjRpeGVJSFRjVTB5CllrcTFFenRpTWUvREtERGZSdWFsY1ZBaE1BS0lWallqNWVycXEzaUZDSStBbGdQRzZ4T2JueHR1OVRIVVk2YlIKRk9ScXBRS0NBUUVBbmhmRWhhK0ZvRVZ6ekJhM0liSjdXOVQ1Y1p3RXdRajJCS1lFaVZqK1E0QlQ2VG8yT1JlcgoxY0hzdk5OVzc1enNTdnlBMlJQVlFROXZuMGlaSDNhRWMyMTNIelpaTDJYLzVQVnkzckJVQW4rS2JrNThjYWo3ClJQSDF0L1Faa1Q0YlVUUDRGNDdyUVo0emJsS1RtM0V5UlU1bFA2MVNWa085U3NKQnlOcEZVMTdWWEtsUmNrNG4KWndodFRkY2RXSVMxZmVLY3FENWJhSGJocHVEdGVjRHBDYlVZSzRUY1FhaHRmRDh5RmtVaUVVWUw5SEpaSWtvaQoySndkb2FBZlRGckZNU2pCWFFjTWlWOHBWUVIvdFRldG1VeEQrZWhGZFB2VjVCWVJpSFh5NXR5RlpPTk0yaE80CkZCdnR4NGlQaE1uQzFwc0VmWmVYM210S1ZjbFRad3hWOFFLQ0FRRUF4OHZ2VXNkWG81VU9JQ1ZoU2h1bkZHM3EKUllwUklWQTEyako0b3g0SDQzSGx6cnFZM0J4YjErTm1rQVZxNkpxODA3REpSMmdWK2IxWjUrdmR4N252QlQycAo5RC9qRFJJSWJrVXNsR1gwcWNjd2QvQkwrNFZ0c08rdkVaWW9nVzZaREpnT2s2QUVORENnUENaUlB1R1RCcEhRCjZpMUd2ZHZqNmRUWEkxbXd6WG1oL2NvVURZVmdPbjUvbmUvdTFDcWRMc09IWDhQY0lJWVBVRUo1SFRQWERsYnAKTUM3cG1pUkFCNlhEYVBZVkhDdnljRUdnRHhlRTAzcDJKcytkc0ErUjM4bGpReHZjMURsNDFraWNESTEySkR4VwppOUg4NFlqN05wK3IrblhkUERvZjhJS25qb2sxV3lGUEVMNGtYZk9vRlNBakNiU29wdVZCVzFzcFM1MnlxQT09Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: testing-wh
  labels:
    app: testing-wh
spec:
  replicas: 1
  selector:
    matchLabels:
      app: testing-wh
  template:
    metadata:
      labels:
        app: testing-wh
    spec:
      containers:
        - name: testing-wh
          image: soorena776/testing-wh:v9
          imagePullPolicy: Always
          args:
            - -tls-cert-file=/etc/webhook/certs/tls.crt
            - -tls-key-file=/etc/webhook/certs/tls.key
          resources:
            requests:
              cpu: 250m
              memory: 25Mi
            limits:
              cpu: 250m
              memory: 25Mi
          volumeMounts:
            - name: webhook-certs
              mountPath: /etc/webhook/certs
              readOnly: true
          ports:
              - containerPort: 8099
      volumes:
        - name: webhook-certs
          secret:
            secretName: testing-wh
---
apiVersion: v1
kind: Service
metadata:
  name: testing-wh
  labels:
    app: testing-wh
spec:
  ports:
  - port: 443
    targetPort: 8099
  selector:
    app: testing-wh